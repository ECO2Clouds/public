<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_21) on Mon Sep 09 17:09:57 BST 2013 -->
<title>MetricsCollector</title>
<meta name="date" content="2013-09-09">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="MetricsCollector";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/MetricsCollector.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/MessageHandler.Level.html" title="enum in eu.eco2clouds.accounting.monitoringcollector"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/MMQEvent.html" title="class in eu.eco2clouds.accounting.monitoringcollector"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?eu/eco2clouds/accounting/monitoringcollector/MetricsCollector.html" target="_top">Frames</a></li>
<li><a href="MetricsCollector.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">eu.eco2clouds.accounting.monitoringcollector</div>
<h2 title="Class MetricsCollector" class="title">Class MetricsCollector</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>eu.eco2clouds.accounting.monitoringcollector.MetricsCollector</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/Collector.html" title="interface in eu.eco2clouds.accounting.monitoringcollector">Collector</a>, java.lang.Runnable</dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">MetricsCollector</span>
extends java.lang.Object
implements <a href="../../../../eu/eco2clouds/accounting/monitoringcollector/Collector.html" title="interface in eu.eco2clouds.accounting.monitoringcollector">Collector</a></pre>
<div class="block">Periodically gets the list of active ECO2Clouds resources from the accounting database and calls the BonFIRE Zabbix API abstraction for all metrics recorded for that experiment since the last query.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/IDatabaseConnector.html" title="interface in eu.eco2clouds.accounting.monitoringcollector">IDatabaseConnector</a></code></td>
<td class="colLast"><code><strong><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/MetricsCollector.html#dbConnector">dbConnector</a></strong></code>
<div class="block">Used to abstract database functions from the collector itself.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) javax.net.ssl.SSLSocketFactory</code></td>
<td class="colLast"><code><strong><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/MetricsCollector.html#sslSocketFactory">sslSocketFactory</a></strong></code>
<div class="block">The connection factory which uses certificate authentication for mutual authentication with the BonFIRE API.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) long</code></td>
<td class="colLast"><code><strong><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/MetricsCollector.html#startTime">startTime</a></strong></code>
<div class="block">Used to calculate the duration of processing to reduce error on API calls for historical data when getting all new metrics which have been recorded since the Collector thread was asleep.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/MetricsCollector.html#stopCollecting">stopCollecting</a></strong></code>
<div class="block">Used to signal the collector to stop.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/MetricsCollector.html#MetricsCollector()">MetricsCollector</a></strong>()</code>
<div class="block">Instantiates a new metrics collector.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/MetricsCollector.html#convertStreamToString(java.io.InputStream)">convertStreamToString</a></strong>(java.io.InputStream&nbsp;is)</code>
<div class="block">Helper function to convert the given InputStream to a string.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/MetricsCollector.html#establishSecureContext()">establishSecureContext</a></strong>()</code>
<div class="block">Loads the Java keystore specified in the properties file with the BonFIRE API certificate and this application's certificate/private key pair for use in mutual authentication.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.util.ArrayList&lt;java.lang.String&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/MetricsCollector.html#getAliases(java.lang.String)">getAliases</a></strong>(java.lang.String&nbsp;aliasesURLString)</code>
<div class="block">Gets the list of available metrics (aka the metric aliases) from the BonFIRE Zabbix API abstraction as per http://wiki.bonfire-project.eu/index.php/Monitoring_Ecometrics_specs</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.util.ArrayList&lt;<a href="../../../../eu/eco2clouds/accounting/monitoringcollector/Item.html" title="class in eu.eco2clouds.accounting.monitoringcollector">Item</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/MetricsCollector.html#getMetric(java.lang.String, java.lang.String)">getMetric</a></strong>(java.lang.String&nbsp;metricURLString,
         java.lang.String&nbsp;metric)</code>
<div class="block">Gets the metric values and other item information from the BonFIRE Zabbix API abstraction as per http://wiki.bonfire-project.eu/index.php/Monitoring_Ecometrics_specs.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.lang.String[]</code></td>
<td class="colLast"><code><strong><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/MetricsCollector.html#getOneStatus(java.lang.String)">getOneStatus</a></strong>(java.lang.String&nbsp;urlString)</code>
<div class="block">Gets the names of all physical host machines from the one-status page for a site.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.lang.String[]</code></td>
<td class="colLast"><code><strong><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/MetricsCollector.html#getSites()">getSites</a></strong>()</code>
<div class="block">Gather all site names from the {siteName, statusURL} pairs as supplied in the accompanying .properties file.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.io.InputStream</code></td>
<td class="colLast"><code><strong><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/MetricsCollector.html#getURLContent(java.lang.String, boolean)">getURLContent</a></strong>(java.lang.String&nbsp;urlString,
             boolean&nbsp;authRequired)</code>
<div class="block">Gets an InputStream of the provided URL.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/MetricsCollector.html#populateResourceDummyMetrics(java.util.ArrayList, int)">populateResourceDummyMetrics</a></strong>(java.util.ArrayList&lt;? extends <a href="../../../../eu/eco2clouds/accounting/monitoringcollector/Resource.html" title="class in eu.eco2clouds.accounting.monitoringcollector">Resource</a>&gt;&nbsp;resources,
                            int&nbsp;numItems)</code>
<div class="block">Inserts randomly generated metrics Items into the supplied Resource objects.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/MetricsCollector.html#run()">run</a></strong>()</code>
<div class="block">Must be run in its own thread.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/MetricsCollector.html#stop()">stop</a></strong>()</code>
<div class="block">Stops this collector and shuts down.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/MetricsCollector.html#updateDatabaseExperimentMetrics()">updateDatabaseExperimentMetrics</a></strong>()</code>
<div class="block">Update the database with all gathered experiment metrics:
 Gets the list of active experiments from the accounting database (via the DatabaseConnector).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/MetricsCollector.html#updateDatabaseHostsMetrics()">updateDatabaseHostsMetrics</a></strong>()</code>
<div class="block">Update the database with all gathered (physical) hosts metrics:
 Gets the list of host records from the accounting database (via the DatabaseConnector).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/MetricsCollector.html#updateDatabaseHostsStatus()">updateDatabaseHostsStatus</a></strong>()</code>
<div class="block">Updates the database with the existence of all hosts (i.e.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/MetricsCollector.html#updateDatabaseInfrastructureStatus()">updateDatabaseInfrastructureStatus</a></strong>()</code>
<div class="block">Updates both site and host listings in the database - functionally calls <code>updateDatabaseSitesStatus()</code> followed by <code>updateDatabaseHostsStatus()</code>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/MetricsCollector.html#updateDatabaseSitesMetrics()">updateDatabaseSitesMetrics</a></strong>()</code>
<div class="block">Updates the database with all sites metrics:
 Gets the list of sites from the accompanying .properties file (via the ConfigurationValues class).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/MetricsCollector.html#updateDatabaseSitesStatus()">updateDatabaseSitesStatus</a></strong>()</code>
<div class="block">Updates the database with the existence of all hosts.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/MetricsCollector.html#updateDatabaseVMMetrics()">updateDatabaseVMMetrics</a></strong>()</code>
<div class="block">Update the database with all gathered virtual machine metrics:
 Gets the list of VMs associated with an active experiment from the accounting database (via the DatabaseConnector).</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="stopCollecting">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stopCollecting</h4>
<pre>private volatile&nbsp;boolean stopCollecting</pre>
<div class="block">Used to signal the collector to stop. Can be set by an external thread.</div>
</li>
</ul>
<a name="startTime">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>startTime</h4>
<pre>long startTime</pre>
<div class="block">Used to calculate the duration of processing to reduce error on API calls for historical data when getting all new metrics which have been recorded since the Collector thread was asleep.</div>
</li>
</ul>
<a name="dbConnector">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dbConnector</h4>
<pre>public&nbsp;<a href="../../../../eu/eco2clouds/accounting/monitoringcollector/IDatabaseConnector.html" title="interface in eu.eco2clouds.accounting.monitoringcollector">IDatabaseConnector</a> dbConnector</pre>
<div class="block">Used to abstract database functions from the collector itself.</div>
</li>
</ul>
<a name="sslSocketFactory">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>sslSocketFactory</h4>
<pre>javax.net.ssl.SSLSocketFactory sslSocketFactory</pre>
<div class="block">The connection factory which uses certificate authentication for mutual authentication with the BonFIRE API.</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="MetricsCollector()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>MetricsCollector</h4>
<pre>public&nbsp;MetricsCollector()</pre>
<div class="block">Instantiates a new metrics collector.</div>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="run()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>run</h4>
<pre>public&nbsp;void&nbsp;run()</pre>
<div class="block">Must be run in its own thread.
 Updates all eco-metrics for Experiments, Virtual Machines, Hosts and Sites; sleeps for the set polling rate (default 10s) and repeats until told to stop collecting (i.e. until stopCollecting = true).</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>run</code>&nbsp;in interface&nbsp;<code>java.lang.Runnable</code></dd>
</dl>
</li>
</ul>
<a name="stop()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stop</h4>
<pre>public&nbsp;void&nbsp;stop()</pre>
<div class="block">Stops this collector and shuts down. Expected to be called from a thread other than that of the collector.</div>
</li>
</ul>
<a name="updateDatabaseInfrastructureStatus()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateDatabaseInfrastructureStatus</h4>
<pre>public&nbsp;void&nbsp;updateDatabaseInfrastructureStatus()</pre>
<div class="block">Updates both site and host listings in the database - functionally calls <code>updateDatabaseSitesStatus()</code> followed by <code>updateDatabaseHostsStatus()</code>.</div>
</li>
</ul>
<a name="updateDatabaseSitesStatus()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateDatabaseSitesStatus</h4>
<pre>public&nbsp;void&nbsp;updateDatabaseSitesStatus()</pre>
<div class="block">Updates the database with the existence of all hosts. (i.e. Their entries in the "metrics_sites" table in the database.):
  Gets the list of sites from the accompanying .properties file (via the ConfigurationValues class).
  Updates the accounting database (via the DatabaseConnector) with the supplied site names.</div>
</li>
</ul>
<a name="updateDatabaseSitesMetrics()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateDatabaseSitesMetrics</h4>
<pre>public&nbsp;void&nbsp;updateDatabaseSitesMetrics()</pre>
<div class="block">Updates the database with all sites metrics:
 Gets the list of sites from the accompanying .properties file (via the ConfigurationValues class).
 Gets the list of metric aliases for a site from the BonFIRE Zabbix API.
 Calls the API for the value of each metric !!!One call per metric per site. Serious QoS concerns.!!!.
 Repeats for all sites.
 Updates the accounting database (via the DatabaseConnector) with all gathered metrics.</div>
</li>
</ul>
<a name="updateDatabaseHostsStatus()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateDatabaseHostsStatus</h4>
<pre>public&nbsp;void&nbsp;updateDatabaseHostsStatus()</pre>
<div class="block">Updates the database with the existence of all hosts (i.e. Their entries in the "metrics_physical_hosts" table in the database) assuming associated site record already exists:
 Calls the one-status URL defined in the accompanying .properties file for the current list of physical host machines at each site.
 Updates the database with the gathered host names.</div>
</li>
</ul>
<a name="updateDatabaseHostsMetrics()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateDatabaseHostsMetrics</h4>
<pre>public&nbsp;void&nbsp;updateDatabaseHostsMetrics()</pre>
<div class="block">Update the database with all gathered (physical) hosts metrics:
 Gets the list of host records from the accounting database (via the DatabaseConnector).
 !!!Generates dummy metrics as there is currently no method in the API at http://wiki.bonfire-project.eu/index.php/Monitoring_Ecometrics_specs for collecting metrics for an individual physical machine!!!
 Updates the accounting database (via the DatabaseConnector) with all gathered metrics.</div>
</li>
</ul>
<a name="updateDatabaseVMMetrics()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateDatabaseVMMetrics</h4>
<pre>public&nbsp;void&nbsp;updateDatabaseVMMetrics()</pre>
<div class="block">Update the database with all gathered virtual machine metrics:
 Gets the list of VMs associated with an active experiment from the accounting database (via the DatabaseConnector).
 Gets the list of metric aliases for a VM from the BonFIRE Zabbix API.
 Calls the API for the value of each metric !!!One call per metric per site. Serious QoS concerns.!!!.
 Repeats for all VMs.
 Updates the accounting database (via the DatabaseConnector) with all gathered metrics.</div>
</li>
</ul>
<a name="updateDatabaseExperimentMetrics()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateDatabaseExperimentMetrics</h4>
<pre>public&nbsp;void&nbsp;updateDatabaseExperimentMetrics()</pre>
<div class="block">Update the database with all gathered experiment metrics:
 Gets the list of active experiments from the accounting database (via the DatabaseConnector).
 !!!Generates dummy metrics as there is currently no method in the API at http://wiki.bonfire-project.eu/index.php/Monitoring_Ecometrics_specs for collecting Application layer metrics!!!
 Updates the accounting database (via the DatabaseConnector) with all gathered metrics.</div>
</li>
</ul>
<a name="getURLContent(java.lang.String, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getURLContent</h4>
<pre>public&nbsp;java.io.InputStream&nbsp;getURLContent(java.lang.String&nbsp;urlString,
                                boolean&nbsp;authRequired)
                                  throws java.io.IOException</pre>
<div class="block">Gets an InputStream of the provided URL.
 All external network transactions are performed through this function ensuring that user-agents and any required authentication are set correctly.
 Sets all connections requiring authentication to the custom port of 444 (required for BonFIRE client certificate authentication).</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>urlString</code> - the string representation of the url to contact</dd><dd><code>authRequired</code> - set true if the connection requires authentication (e.g. a BonFIRE API call) or false otherwise (e.g. a one-status call).</dd>
<dt><span class="strong">Returns:</span></dt><dd>an InputStream of the provided URL. Must be closed external to this function.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code> - Pushes exceptions up the chain on a communication error.</dd></dl>
</li>
</ul>
<a name="getOneStatus(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOneStatus</h4>
<pre>public&nbsp;java.lang.String[]&nbsp;getOneStatus(java.lang.String&nbsp;urlString)</pre>
<div class="block">Gets the names of all physical host machines from the one-status page for a site.
 URL must be set in the accompanying .properties file.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>urlString</code> - the url of the one-status page</dd>
<dt><span class="strong">Returns:</span></dt><dd>the host names for all physical machines reported by the site</dd></dl>
</li>
</ul>
<a name="getAliases(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAliases</h4>
<pre>private&nbsp;java.util.ArrayList&lt;java.lang.String&gt;&nbsp;getAliases(java.lang.String&nbsp;aliasesURLString)</pre>
<div class="block">Gets the list of available metrics (aka the metric aliases) from the BonFIRE Zabbix API abstraction as per http://wiki.bonfire-project.eu/index.php/Monitoring_Ecometrics_specs</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>aliasesURLString</code> - the url of the resource's aliases listing</dd>
<dt><span class="strong">Returns:</span></dt><dd>a list with each alias name</dd></dl>
</li>
</ul>
<a name="getMetric(java.lang.String, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMetric</h4>
<pre>private&nbsp;java.util.ArrayList&lt;<a href="../../../../eu/eco2clouds/accounting/monitoringcollector/Item.html" title="class in eu.eco2clouds.accounting.monitoringcollector">Item</a>&gt;&nbsp;getMetric(java.lang.String&nbsp;metricURLString,
                                  java.lang.String&nbsp;metric)</pre>
<div class="block">Gets the metric values and other item information from the BonFIRE Zabbix API abstraction as per http://wiki.bonfire-project.eu/index.php/Monitoring_Ecometrics_specs.
 Can be used either for a single call or with the history_metrics function.
 !!!Currently one API call per metric. Serious QoS issues!!!</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>metricURLString</code> - the url of the metric query</dd><dd><code>metric</code> - the alias name of the metric</dd>
<dt><span class="strong">Returns:</span></dt><dd>a list of Item instances containing the metric information returned by the api.</dd></dl>
</li>
</ul>
<a name="getSites()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSites</h4>
<pre>private&nbsp;java.lang.String[]&nbsp;getSites()</pre>
<div class="block">Gather all site names from the {siteName, statusURL} pairs as supplied in the accompanying .properties file.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the siteNames</dd></dl>
</li>
</ul>
<a name="populateResourceDummyMetrics(java.util.ArrayList, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>populateResourceDummyMetrics</h4>
<pre>private&nbsp;void&nbsp;populateResourceDummyMetrics(java.util.ArrayList&lt;? extends <a href="../../../../eu/eco2clouds/accounting/monitoringcollector/Resource.html" title="class in eu.eco2clouds.accounting.monitoringcollector">Resource</a>&gt;&nbsp;resources,
                                int&nbsp;numItems)</pre>
<div class="block">Inserts randomly generated metrics Items into the supplied Resource objects.
 Used as a temporary measure for Experiment/Application and host metrics where there is no API provision for gathering their metrics.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>resources</code> - the resources to populate with dummy data.</dd><dd><code>numItems</code> - the number of items to generate</dd></dl>
</li>
</ul>
<a name="establishSecureContext()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>establishSecureContext</h4>
<pre>public&nbsp;void&nbsp;establishSecureContext()</pre>
<div class="block">Loads the Java keystore specified in the properties file with the BonFIRE API certificate and this application's certificate/private key pair for use in mutual authentication.</div>
</li>
</ul>
<a name="convertStreamToString(java.io.InputStream)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>convertStreamToString</h4>
<pre>private static&nbsp;java.lang.String&nbsp;convertStreamToString(java.io.InputStream&nbsp;is)</pre>
<div class="block">Helper function to convert the given InputStream to a string.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>is</code> - the InputStream to convert to a string</dd>
<dt><span class="strong">Returns:</span></dt><dd>the string representation of the InputStream</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/MetricsCollector.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/MessageHandler.Level.html" title="enum in eu.eco2clouds.accounting.monitoringcollector"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/MMQEvent.html" title="class in eu.eco2clouds.accounting.monitoringcollector"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?eu/eco2clouds/accounting/monitoringcollector/MetricsCollector.html" target="_top">Frames</a></li>
<li><a href="MetricsCollector.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
