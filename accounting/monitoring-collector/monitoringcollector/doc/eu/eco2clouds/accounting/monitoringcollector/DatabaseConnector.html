<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_21) on Mon Sep 09 17:09:57 BST 2013 -->
<title>DatabaseConnector</title>
<meta name="date" content="2013-09-09">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="DatabaseConnector";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/DatabaseConnector.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/ConfigurationValues.html" title="class in eu.eco2clouds.accounting.monitoringcollector"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/DatabaseConnector.Mode.html" title="enum in eu.eco2clouds.accounting.monitoringcollector"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?eu/eco2clouds/accounting/monitoringcollector/DatabaseConnector.html" target="_top">Frames</a></li>
<li><a href="DatabaseConnector.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">eu.eco2clouds.accounting.monitoringcollector</div>
<h2 title="Class DatabaseConnector" class="title">Class DatabaseConnector</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>eu.eco2clouds.accounting.monitoringcollector.DatabaseConnector</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/IDatabaseConnector.html" title="interface in eu.eco2clouds.accounting.monitoringcollector">IDatabaseConnector</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">DatabaseConnector</span>
extends java.lang.Object
implements <a href="../../../../eu/eco2clouds/accounting/monitoringcollector/IDatabaseConnector.html" title="interface in eu.eco2clouds.accounting.monitoringcollector">IDatabaseConnector</a></pre>
<div class="block">Connects to an external database and interacts via prepared SQL statements.
 For the Monitoring component, this enables insertions and updates of active experiment resources records.
 For the Collecting component, this enables insertions and updates of resource metrics.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/DatabaseConnector.Mode.html" title="enum in eu.eco2clouds.accounting.monitoringcollector">DatabaseConnector.Mode</a></strong></code>
<div class="block">The SQL dialects supported by the connector.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/DatabaseConnector.html#connected">connected</a></strong></code>
<div class="block">A flag used to gate the connect() and disconnect() functions.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.sql.Connection</code></td>
<td class="colLast"><code><strong><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/DatabaseConnector.html#connection">connection</a></strong></code>
<div class="block">The SQL object representing the connection to the accounting database.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../eu/eco2clouds/accounting/monitoringcollector/DatabaseConnector.Mode.html" title="enum in eu.eco2clouds.accounting.monitoringcollector">DatabaseConnector.Mode</a></code></td>
<td class="colLast"><code><strong><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/DatabaseConnector.html#currentMode">currentMode</a></strong></code>
<div class="block">The current mode of SQL dialect being used by this connector.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/DatabaseConnector.html#password">password</a></strong></code>
<div class="block">The password for accessing the accounting database.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.sql.ResultSet</code></td>
<td class="colLast"><code><strong><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/DatabaseConnector.html#results">results</a></strong></code>
<div class="block">The results returned by SQL queries.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.sql.PreparedStatement</code></td>
<td class="colLast"><code><strong><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/DatabaseConnector.html#statement">statement</a></strong></code>
<div class="block">A statement object used to prepare SQL transactions.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.sql.PreparedStatement</code></td>
<td class="colLast"><code><strong><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/DatabaseConnector.html#statement2">statement2</a></strong></code>
<div class="block">Additional statement object used to prepare SQL transactions.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/DatabaseConnector.html#url">url</a></strong></code>
<div class="block">The host location of the accounting database.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/DatabaseConnector.html#username">username</a></strong></code>
<div class="block">The username for accessing the accounting database.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/DatabaseConnector.html#DatabaseConnector()">DatabaseConnector</a></strong>()</code>
<div class="block">Instantiates a new database connector.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/DatabaseConnector.html#cleanUp()">cleanUp</a></strong>()</code>
<div class="block">Frees all database resources.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/DatabaseConnector.html#connect()">connect</a></strong>()</code>
<div class="block">Connect to the current database host.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/DatabaseConnector.html#disconnect()">disconnect</a></strong>()</code>
<div class="block">Disconnect from the current database host.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.util.ArrayList&lt;<a href="../../../../eu/eco2clouds/accounting/monitoringcollector/Experiment.html" title="class in eu.eco2clouds.accounting.monitoringcollector">Experiment</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/DatabaseConnector.html#getActiveExperiments()">getActiveExperiments</a></strong>()</code>
<div class="block">Queries the database for all experiments where active == 1.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.util.ArrayList&lt;<a href="../../../../eu/eco2clouds/accounting/monitoringcollector/VirtualMachine.html" title="class in eu.eco2clouds.accounting.monitoringcollector">VirtualMachine</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/DatabaseConnector.html#getActiveVirtualMachines()">getActiveVirtualMachines</a></strong>()</code>
<div class="block">Queries the database for all virtual machines where the associated experiment has field active == 1.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/DatabaseConnector.Mode.html" title="enum in eu.eco2clouds.accounting.monitoringcollector">DatabaseConnector.Mode</a></code></td>
<td class="colLast"><code><strong><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/DatabaseConnector.html#getMode()">getMode</a></strong>()</code>
<div class="block">Gets the current SQL dialect mode of this connector.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/DatabaseConnector.html#getModeSpecificIdentity()">getModeSpecificIdentity</a></strong>()</code>
<div class="block">Gets the name of the dialect specific function for returning the last generated id for an inserted record on this connection.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.util.ArrayList&lt;<a href="../../../../eu/eco2clouds/accounting/monitoringcollector/PhysicalHost.html" title="class in eu.eco2clouds.accounting.monitoringcollector">PhysicalHost</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/DatabaseConnector.html#getPhysicalHosts()">getPhysicalHosts</a></strong>()</code>
<div class="block">Queries the database for all physical machine records.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/DatabaseConnector.html#insertNewExperiment(int)">insertNewExperiment</a></strong>(int&nbsp;experimentId)</code>
<div class="block">Insert a new experiment record into the database.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/DatabaseConnector.html#insertNewPhysicalHosts(java.lang.String[], java.lang.String)">insertNewPhysicalHosts</a></strong>(java.lang.String[]&nbsp;hosts,
                      java.lang.String&nbsp;siteName)</code>
<div class="block">Insert a new physical hosts record for each element of the supplied hosts array and associate that record with the supplied site name.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/DatabaseConnector.html#insertNewSites(java.lang.String[])">insertNewSites</a></strong>(java.lang.String[]&nbsp;locations)</code>
<div class="block">Insert a new site record for each element of the supplied array.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/DatabaseConnector.html#insertNewVM(int, java.net.URI, long, java.lang.String, java.lang.String)">insertNewVM</a></strong>(int&nbsp;experimentId,
           java.net.URI&nbsp;location,
           long&nbsp;timeStamp,
           java.lang.String&nbsp;host,
           java.lang.String&nbsp;site)</code>
<div class="block">Insert a new virtual machine record into the database.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/DatabaseConnector.html#setExperimentAggregator(int, java.net.URI)">setExperimentAggregator</a></strong>(int&nbsp;experimentId,
                       java.net.URI&nbsp;aggregator)</code>
<div class="block">Sets the aggregator on the the record with the specified experiment id.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/DatabaseConnector.html#setExperimentTerminated(int)">setExperimentTerminated</a></strong>(int&nbsp;experimentId)</code>
<div class="block">Sets the active value on the record with the specified experiment id to 0.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/DatabaseConnector.html#setMode(eu.eco2clouds.accounting.monitoringcollector.DatabaseConnector.Mode)">setMode</a></strong>(<a href="../../../../eu/eco2clouds/accounting/monitoringcollector/DatabaseConnector.Mode.html" title="enum in eu.eco2clouds.accounting.monitoringcollector">DatabaseConnector.Mode</a>&nbsp;mode)</code>
<div class="block">Sets the current SQL dialect mode of this connector to either Mode.MYSQL or Mode.HSQLDB.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/DatabaseConnector.html#updateMetrics(java.util.List, java.lang.String)">updateMetrics</a></strong>(java.util.List&lt;? extends <a href="../../../../eu/eco2clouds/accounting/monitoringcollector/Resource.html" title="class in eu.eco2clouds.accounting.monitoringcollector">Resource</a>&gt;&nbsp;resources,
             java.lang.String&nbsp;itemsTable)</code>
<div class="block">Updates the database records associated with the supplied resources with the collection of Items (metrics data) on each resource.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="username">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>username</h4>
<pre>private&nbsp;java.lang.String username</pre>
<div class="block">The username for accessing the accounting database.</div>
</li>
</ul>
<a name="password">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>password</h4>
<pre>private&nbsp;java.lang.String password</pre>
<div class="block">The password for accessing the accounting database.</div>
</li>
</ul>
<a name="url">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>url</h4>
<pre>private&nbsp;java.lang.String url</pre>
<div class="block">The host location of the accounting database.</div>
</li>
</ul>
<a name="connection">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>connection</h4>
<pre>public&nbsp;java.sql.Connection connection</pre>
<div class="block">The SQL object representing the connection to the accounting database.</div>
</li>
</ul>
<a name="statement">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>statement</h4>
<pre>private&nbsp;java.sql.PreparedStatement statement</pre>
<div class="block">A statement object used to prepare SQL transactions.</div>
</li>
</ul>
<a name="statement2">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>statement2</h4>
<pre>private&nbsp;java.sql.PreparedStatement statement2</pre>
<div class="block">Additional statement object used to prepare SQL transactions.</div>
</li>
</ul>
<a name="results">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>results</h4>
<pre>private&nbsp;java.sql.ResultSet results</pre>
<div class="block">The results returned by SQL queries.</div>
</li>
</ul>
<a name="currentMode">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>currentMode</h4>
<pre>private&nbsp;<a href="../../../../eu/eco2clouds/accounting/monitoringcollector/DatabaseConnector.Mode.html" title="enum in eu.eco2clouds.accounting.monitoringcollector">DatabaseConnector.Mode</a> currentMode</pre>
<div class="block">The current mode of SQL dialect being used by this connector. MySQL by default.</div>
</li>
</ul>
<a name="connected">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>connected</h4>
<pre>public&nbsp;boolean connected</pre>
<div class="block">A flag used to gate the connect() and disconnect() functions.</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="DatabaseConnector()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>DatabaseConnector</h4>
<pre>public&nbsp;DatabaseConnector()</pre>
<div class="block">Instantiates a new database connector.</div>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="connect()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>connect</h4>
<pre>public&nbsp;void&nbsp;connect()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/IDatabaseConnector.html#connect()">IDatabaseConnector</a></code></strong></div>
<div class="block">Connect to the current database host.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/IDatabaseConnector.html#connect()">connect</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/IDatabaseConnector.html" title="interface in eu.eco2clouds.accounting.monitoringcollector">IDatabaseConnector</a></code></dd>
</dl>
</li>
</ul>
<a name="disconnect()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>disconnect</h4>
<pre>public&nbsp;void&nbsp;disconnect()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/IDatabaseConnector.html#disconnect()">IDatabaseConnector</a></code></strong></div>
<div class="block">Disconnect from the current database host.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/IDatabaseConnector.html#disconnect()">disconnect</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/IDatabaseConnector.html" title="interface in eu.eco2clouds.accounting.monitoringcollector">IDatabaseConnector</a></code></dd>
</dl>
</li>
</ul>
<a name="cleanUp()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cleanUp</h4>
<pre>private&nbsp;void&nbsp;cleanUp()</pre>
<div class="block">Frees all database resources.</div>
</li>
</ul>
<a name="insertNewExperiment(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>insertNewExperiment</h4>
<pre>public&nbsp;void&nbsp;insertNewExperiment(int&nbsp;experimentId)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/IDatabaseConnector.html#insertNewExperiment(int)">IDatabaseConnector</a></code></strong></div>
<div class="block">Insert a new experiment record into the database.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/IDatabaseConnector.html#insertNewExperiment(int)">insertNewExperiment</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/IDatabaseConnector.html" title="interface in eu.eco2clouds.accounting.monitoringcollector">IDatabaseConnector</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>experimentId</code> - the experiment id</dd></dl>
</li>
</ul>
<a name="setExperimentTerminated(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setExperimentTerminated</h4>
<pre>public&nbsp;void&nbsp;setExperimentTerminated(int&nbsp;experimentId)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/IDatabaseConnector.html#setExperimentTerminated(int)">IDatabaseConnector</a></code></strong></div>
<div class="block">Sets the active value on the record with the specified experiment id to 0.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/IDatabaseConnector.html#setExperimentTerminated(int)">setExperimentTerminated</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/IDatabaseConnector.html" title="interface in eu.eco2clouds.accounting.monitoringcollector">IDatabaseConnector</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>experimentId</code> - the experiment to set inactive</dd></dl>
</li>
</ul>
<a name="setExperimentAggregator(int, java.net.URI)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setExperimentAggregator</h4>
<pre>public&nbsp;void&nbsp;setExperimentAggregator(int&nbsp;experimentId,
                           java.net.URI&nbsp;aggregator)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/IDatabaseConnector.html#setExperimentAggregator(int, java.net.URI)">IDatabaseConnector</a></code></strong></div>
<div class="block">Sets the aggregator on the the record with the specified experiment id.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/IDatabaseConnector.html#setExperimentAggregator(int, java.net.URI)">setExperimentAggregator</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/IDatabaseConnector.html" title="interface in eu.eco2clouds.accounting.monitoringcollector">IDatabaseConnector</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>experimentId</code> - the experiment id</dd><dd><code>aggregator</code> - the indicator of the aggregator compute resource</dd></dl>
</li>
</ul>
<a name="insertNewVM(int, java.net.URI, long, java.lang.String, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>insertNewVM</h4>
<pre>public&nbsp;void&nbsp;insertNewVM(int&nbsp;experimentId,
               java.net.URI&nbsp;location,
               long&nbsp;timeStamp,
               java.lang.String&nbsp;host,
               java.lang.String&nbsp;site)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/IDatabaseConnector.html#insertNewVM(int, java.net.URI, long, java.lang.String, java.lang.String)">IDatabaseConnector</a></code></strong></div>
<div class="block">Insert a new virtual machine record into the database.
 Both host and site are required as a physical host name cannot be used as a unique identifier.
 e.g. Both fr-inria and uk-epcc could name a host "BonFIRE-Host-1".</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/IDatabaseConnector.html#insertNewVM(int, java.net.URI, long, java.lang.String, java.lang.String)">insertNewVM</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/IDatabaseConnector.html" title="interface in eu.eco2clouds.accounting.monitoringcollector">IDatabaseConnector</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>experimentId</code> - the id of the experiment with which the virtual machine is to be associated</dd><dd><code>location</code> - the indicator of the compute resource</dd><dd><code>timeStamp</code> - the timestamp of the compute creation event that produced the virtual machine</dd><dd><code>host</code> - the physical host machine which the virtual machine is running on</dd><dd><code>site</code> - the site/testbed where the physical host machine is located.</dd></dl>
</li>
</ul>
<a name="insertNewSites(java.lang.String[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>insertNewSites</h4>
<pre>public&nbsp;void&nbsp;insertNewSites(java.lang.String[]&nbsp;locations)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/IDatabaseConnector.html#insertNewSites(java.lang.String[])">IDatabaseConnector</a></code></strong></div>
<div class="block">Insert a new site record for each element of the supplied array.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/IDatabaseConnector.html#insertNewSites(java.lang.String[])">insertNewSites</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/IDatabaseConnector.html" title="interface in eu.eco2clouds.accounting.monitoringcollector">IDatabaseConnector</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>locations</code> - the location names of each site. e.g. { "uk-epcc", "fr-inria", "de-hlrs", etc. }</dd></dl>
</li>
</ul>
<a name="insertNewPhysicalHosts(java.lang.String[], java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>insertNewPhysicalHosts</h4>
<pre>public&nbsp;void&nbsp;insertNewPhysicalHosts(java.lang.String[]&nbsp;hosts,
                          java.lang.String&nbsp;siteName)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/IDatabaseConnector.html#insertNewPhysicalHosts(java.lang.String[], java.lang.String)">IDatabaseConnector</a></code></strong></div>
<div class="block">Insert a new physical hosts record for each element of the supplied hosts array and associate that record with the supplied site name.
 It is assumed that site names can be used as unique identifiers. e.g. It will never be the case that two distinct partners share the name uk-epcc.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/IDatabaseConnector.html#insertNewPhysicalHosts(java.lang.String[], java.lang.String)">insertNewPhysicalHosts</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/IDatabaseConnector.html" title="interface in eu.eco2clouds.accounting.monitoringcollector">IDatabaseConnector</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>hosts</code> - the host names of each physical machine</dd><dd><code>siteName</code> - the name of the site where the specified physical machines are housed.</dd></dl>
</li>
</ul>
<a name="getActiveExperiments()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getActiveExperiments</h4>
<pre>public&nbsp;java.util.ArrayList&lt;<a href="../../../../eu/eco2clouds/accounting/monitoringcollector/Experiment.html" title="class in eu.eco2clouds.accounting.monitoringcollector">Experiment</a>&gt;&nbsp;getActiveExperiments()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/IDatabaseConnector.html#getActiveExperiments()">IDatabaseConnector</a></code></strong></div>
<div class="block">Queries the database for all experiments where active == 1.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/IDatabaseConnector.html#getActiveExperiments()">getActiveExperiments</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/IDatabaseConnector.html" title="interface in eu.eco2clouds.accounting.monitoringcollector">IDatabaseConnector</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>a collection containing the active experiments</dd></dl>
</li>
</ul>
<a name="getActiveVirtualMachines()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getActiveVirtualMachines</h4>
<pre>public&nbsp;java.util.ArrayList&lt;<a href="../../../../eu/eco2clouds/accounting/monitoringcollector/VirtualMachine.html" title="class in eu.eco2clouds.accounting.monitoringcollector">VirtualMachine</a>&gt;&nbsp;getActiveVirtualMachines()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/IDatabaseConnector.html#getActiveVirtualMachines()">IDatabaseConnector</a></code></strong></div>
<div class="block">Queries the database for all virtual machines where the associated experiment has field active == 1.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/IDatabaseConnector.html#getActiveVirtualMachines()">getActiveVirtualMachines</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/IDatabaseConnector.html" title="interface in eu.eco2clouds.accounting.monitoringcollector">IDatabaseConnector</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>a collection containing the active virtual machines</dd></dl>
</li>
</ul>
<a name="getPhysicalHosts()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPhysicalHosts</h4>
<pre>public&nbsp;java.util.ArrayList&lt;<a href="../../../../eu/eco2clouds/accounting/monitoringcollector/PhysicalHost.html" title="class in eu.eco2clouds.accounting.monitoringcollector">PhysicalHost</a>&gt;&nbsp;getPhysicalHosts()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/IDatabaseConnector.html#getPhysicalHosts()">IDatabaseConnector</a></code></strong></div>
<div class="block">Queries the database for all physical machine records.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/IDatabaseConnector.html#getPhysicalHosts()">getPhysicalHosts</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/IDatabaseConnector.html" title="interface in eu.eco2clouds.accounting.monitoringcollector">IDatabaseConnector</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>a collection containing the physical host machines records</dd></dl>
</li>
</ul>
<a name="updateMetrics(java.util.List, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateMetrics</h4>
<pre>public&nbsp;void&nbsp;updateMetrics(java.util.List&lt;? extends <a href="../../../../eu/eco2clouds/accounting/monitoringcollector/Resource.html" title="class in eu.eco2clouds.accounting.monitoringcollector">Resource</a>&gt;&nbsp;resources,
                 java.lang.String&nbsp;itemsTable)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/IDatabaseConnector.html#updateMetrics(java.util.List, java.lang.String)">IDatabaseConnector</a></code></strong></div>
<div class="block">Updates the database records associated with the supplied resources with the collection of Items (metrics data) on each resource.
 Only inserts an Item record so long as it is not a duplicate. It is classified as a duplicate if there already exists an association 
 with the current resource in the "resource_items" table for an "items" record that has the same zabbix_itemid and timestamp.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/IDatabaseConnector.html#updateMetrics(java.util.List, java.lang.String)">updateMetrics</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/IDatabaseConnector.html" title="interface in eu.eco2clouds.accounting.monitoringcollector">IDatabaseConnector</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>resources</code> - the collection of resources subject to update. Each resource object has a List of Items containing the metrics gathered.</dd><dd><code>itemsTable</code> - the items table which is associated with the resources being updated. e.g. When the resources are virtual machines, the itemsTable string must be "virtual_machines".</dd></dl>
</li>
</ul>
<a name="getModeSpecificIdentity()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getModeSpecificIdentity</h4>
<pre>private&nbsp;java.lang.String&nbsp;getModeSpecificIdentity()</pre>
<div class="block">Gets the name of the dialect specific function for returning the last generated id for an inserted record on this connection.
 With MySQL: "LAST_INSERT_ID()", HSQLDB: "IDENTITY()".</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the mode specific identity</dd></dl>
</li>
</ul>
<a name="getMode()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMode</h4>
<pre>public&nbsp;<a href="../../../../eu/eco2clouds/accounting/monitoringcollector/DatabaseConnector.Mode.html" title="enum in eu.eco2clouds.accounting.monitoringcollector">DatabaseConnector.Mode</a>&nbsp;getMode()</pre>
<div class="block">Gets the current SQL dialect mode of this connector.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the mode as represented by the Mode enum.</dd></dl>
</li>
</ul>
<a name="setMode(eu.eco2clouds.accounting.monitoringcollector.DatabaseConnector.Mode)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>setMode</h4>
<pre>public&nbsp;void&nbsp;setMode(<a href="../../../../eu/eco2clouds/accounting/monitoringcollector/DatabaseConnector.Mode.html" title="enum in eu.eco2clouds.accounting.monitoringcollector">DatabaseConnector.Mode</a>&nbsp;mode)</pre>
<div class="block">Sets the current SQL dialect mode of this connector to either Mode.MYSQL or Mode.HSQLDB.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>mode</code> - the mode as represented by the Mode enum.</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/DatabaseConnector.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/ConfigurationValues.html" title="class in eu.eco2clouds.accounting.monitoringcollector"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../eu/eco2clouds/accounting/monitoringcollector/DatabaseConnector.Mode.html" title="enum in eu.eco2clouds.accounting.monitoringcollector"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?eu/eco2clouds/accounting/monitoringcollector/DatabaseConnector.html" target="_top">Frames</a></li>
<li><a href="DatabaseConnector.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
